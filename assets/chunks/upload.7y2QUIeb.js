import{au as g,aC as p,b3 as b,at as v,ay as u}from"./framework.VGiUaGJl.js";function F(e){for(var t=-1,a=e==null?0:e.length,s={};++t<a;){var l=e[t];s[l[0]]=l[1]}return s}function O(e){return e==null}class S extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function $(e,t){throw new S(`[${e}] ${t}`)}function A(e,t){}const h="__epPropKey",o=e=>e,j=e=>g(e)&&!!e[h],x=(e,t)=>{if(!g(e)||j(e))return e;const{values:a,required:s,default:l,type:n,validator:r}=e,c={type:n,required:!!s,validator:a||r?f=>{let d=!1,i=[];if(a&&(i=Array.from(a),p(e,"default")&&i.push(l),d||(d=i.includes(f))),r&&(d||(d=r(f))),!d&&i.length>0){const w=[...new Set(i)].map(P=>JSON.stringify(P)).join(", ");b(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${w}], got value ${JSON.stringify(f)}.`)}return d}:void 0,[h]:!0};return p(e,"default")&&(c.default=l),c},E=e=>F(Object.entries(e).map(([t,a])=>[t,x(a,t)])),y=e=>e,L="ElUpload";class q extends Error{constructor(t,a,s,l){super(t),this.name="UploadAjaxError",this.status=a,this.method=s,this.url=l}}function m(e,t,a){let s;return a.response?s=`${a.response.error||a.response}`:a.responseText?s=`${a.responseText}`:s=`fail to ${t.method} ${e} ${a.status}`,new q(s,a.status,t.method,e)}function B(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const R=e=>{typeof XMLHttpRequest>"u"&&$(L,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,a=e.action;t.upload&&t.upload.addEventListener("progress",n=>{const r=n;r.percent=n.total>0?n.loaded/n.total*100:0,e.onProgress(r)});const s=new FormData;if(e.data)for(const[n,r]of Object.entries(e.data))v(r)&&r.length?s.append(n,...r):s.append(n,r);s.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(m(a,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(m(a,e,t));e.onSuccess(B(t))}),t.open(e.method,a,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const l=e.headers||{};if(l instanceof Headers)l.forEach((n,r)=>t.setRequestHeader(r,n));else for(const[n,r]of Object.entries(l))O(r)||t.setRequestHeader(n,String(r));return t.send(s),t},C=["text","picture","picture-card"];let T=1;const _=()=>Date.now()+T++,H=E({action:{type:String,default:"#"},headers:{type:o(Object)},method:{type:String,default:"post"},data:{type:o([Object,Function,Promise]),default:()=>y({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:o(Array),default:()=>y([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:C,default:"text"},httpRequest:{type:o(Function),default:R},disabled:Boolean,limit:Number}),D=E({...H,beforeUpload:{type:o(Function),default:u},beforeRemove:{type:o(Function)},onRemove:{type:o(Function),default:u},onChange:{type:o(Function),default:u},onPreview:{type:o(Function),default:u},onSuccess:{type:o(Function),default:u},onProgress:{type:o(Function),default:u},onError:{type:o(Function),default:u},onExceed:{type:o(Function),default:u}});export{E as a,x as b,A as c,o as d,H as e,F as f,_ as g,D as h,O as i,y as m,$ as t,C as u};
